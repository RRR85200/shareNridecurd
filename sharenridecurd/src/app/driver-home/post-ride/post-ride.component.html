<div class="container">
  <br>
  <div class="row">
    <div *ngIf="hasCar" id="showcardetails">
      <div class="col-md-12">
        <h2 style="color:blue;">My Car</h2>
        <div class="col-md-2">
          <label>Company</label>
          <p>{{userCar.company}}</p>
        </div>
        <div class="col-md-2">
          <label>Model</label>
          <p>{{userCar.model}}</p>
        </div>
        <div class="col-md-2">
          <label>Year</label>
          <p>{{userCar.year}}</p>
        </div>
        <div class="col-md-2">
          <label>Max Capacity</label>
          <p>{{userCar.seats}}</p>
        </div>
        <div class="col-md-2">
          <label>Registration</label>
          <p>{{userCar.vehicle_num}}</p>
        </div>
        <div class="col-md-2">
          <button type="button" class="btn btn-warning" (click)="editCar()">Edit Car</button>
        </div>
      </div>

    </div>

    <div class="alert alert-danger" role="alert" *ngIf="statusUpdateCar === 'failure'">
      {{successMsg}}
    </div>
    <div class="alert alert-success" role="alert" *ngIf="statusUpdateCar === 'success'">
      {{successMsg}}
    </div>
  </div>
  <div *ngIf="!isUpdateCar">
    <form [formGroup]="updateCar" (ngSubmit)="UpdateCar()">

      <div class="col-md-12">

        <h2 style="color:blue;">Update Car Details</h2>
        <br>

        <div class="col-md-2">
          <br>
          <label>Car Model</label>
          <div class="form-group">
            <input type="text" placeholder="Car Model" formControlName="model" [(ngModel)]="userCar.model" id="model" class="form-control">
          </div>
        </div>


        <div class="col-md-2">
          <br>
          <label>Car Maker</label>
          <div class="form-group">
            <input type="text" placeholder="Car Company" name="company" formControlName="company" [(ngModel)]="userCar.company" id="company"
              class="form-control">
          </div>
        </div>


        <div class="col-md-2">
          <br>
          <label>Year</label>
          <div class="form-group">
            <input type="number" placeholder="Make Year" formControlName="year" min="1980" max="2020" [(ngModel)]="userCar.year" id="year"
              class="form-control">
          </div>
        </div>


        <div class="col-md-2">
          <br>
          <label>No of Seats</label>
          <div class="form-group">
            <input type="number" placeholder="No of Seats" formControlName="seats" min="1" max="5" [(ngModel)]="userCar.seats" id="seats"
              class="form-control">
          </div>
        </div>


        <div class="col-md-2">
          <br>
          <label>Registration Number</label>
          <div class="form-group">
            <input type="string" placeholder="Registration Number" formControlName="vehicleNum" [(ngModel)]="userCar.vehicle_num" id="vehicleNum"
              class="form-control">
          </div>
        </div>

        <div class="col-md-2">
          <br>
          <div class="btn btn-group">
            <br>
            <button type="button" class="btn btn-warning" [disabled]="!updateCar.valid" type="submit">Update Car</button>
          </div>
        </div>
      </div>
      <br>


    </form>

    <div class="alert alert-warning" *ngIf="this.updateCar.get('model').hasError('pattern')
    && this.updateCar.get('model').touched">Enter Only Alphabets or Alphanumberic</div>

    <div class="alert alert-warning" *ngIf="this.updateCar.get('model').hasError('required')
    && this.updateCar.get('model').touched">Car Model required</div>
    <div class="alert alert-warning" *ngIf="this.updateCar.get('model').hasError('pattern')
    && this.updateCar.get('model').touched">should Be alphabetical or AlphaNumerical</div>
    <div class="alert alert-warning" *ngIf="this.updateCar.get('model').hasError('maxLength')
    && this.updateCar.get('model').touched">Cannot be More than 10 Characters</div>
    <div class="alert alert-info" *ngIf="this.updateCar.get('model').touched && this.updateCar.get('model').invalid">
      Car model Should be aphanmubric characters and Max length of 7</div>

    <div class="alert alert-warning" *ngIf="this.updateCar.get('year').hasError('pattern')
    && this.updateCar.get('year').touched">Enter Valid Year between 1980-2000</div>
    <div class="alert alert-warning" *ngIf="this.updateCar.get('year').hasError('minMaxYear')
    && this.updateCar.get('year').touched">Choose a car Model between 1980-2020</div>

    <div class="alert alert-warning" *ngIf="this.updateCar.get('seats').hasError('required')
    && this.updateCar.get('seats').touched">Car Model Year required</div>
    <div class="alert alert-warning" *ngIf="this.updateCar.get('seats').hasError('minMax')
     && this.updateCar.get('seats').touched">Enter Seats between 1 and 6</div>
    <div class="alert alert-warning" *ngIf="this.updateCar.get('seats').hasError('required')
     && this.updateCar.get('seats').touched">Seats required</div>

    <div class="alert alert-warning" *ngIf="this.updateCar.get('vehicleNum').hasError('required')
     && this.updateCar.get('vehicleNum').touched">Vehicle Number Needed</div>
    <div class="alert alert-warning" *ngIf="this.updateCar.get('vehicleNum').hasError('maxLength')
     && this.updateCar.get('vehicleNum').touched">Cannot be More than 7 characters</div>
    <div class="alert alert-warning" *ngIf="this.updateCar.get('vehicleNum').hasError('pattern')
     && this.updateCar.get('vehicleNum').touched">Registration should have Alphabets or AplaNumberic characters</div>
    <div class="alert alert-info" *ngIf="this.updateCar.get('vehicleNum').touched && this.updateCar.get('vehicleNum').invalid">
      Registration number Should be aphanmubric characters and Max length of 7</div>


    <div class="alert alert-warning" *ngIf="this.updateCar.get('company').hasError('required')
     && this.updateCar.get('company').touched">Car company required</div>
    <div class="alert alert-warning" *ngIf="this.updateCar.get('company').hasError('pattern')
     && this.updateCar.get('company').touched">Car Company Must has a valid Alpabetic characters </div>

  </div>

  <div class="row">
    <div class="alert alert-danger" role="alert" *ngIf="statuscar === 'failure'">
      {{successMsg}}
    </div>
    <div class="alert alert-success" role="alert" *ngIf="statuscar === 'success'">
      {{successMsg}}
    </div>
  </div>

  <div class="postCar" *ngIf="!hasCar">
    <form [formGroup]="carDetails" (ngSubmit)="postCar()">

      <div class="col-md-12">

        <h2 style="color:blue;">Enter car Details</h2>
        <br>

        <div class="col-md-2">
          <br>
          <label>Car Model</label>
          <div class="form-group">
            <input type="text" placeholder="Car Model" formControlName="model" [(ngModel)]="car.model" id="model" class="form-control">
          </div>
        </div>


        <div class="col-md-2">
          <br>
          <label>Car Maker</label>
          <div class="form-group">
            <input type="text" placeholder="Car Company" pattern="[a-zA-Z ]*" formControlName="company" [(ngModel)]="car.company" id="company"
              class="form-control">
          </div>
        </div>

        <div class="col-md-2">
          <br>
          <label>Year</label>
          <div class="form-group">
            <input type="number" placeholder="Make Year" min="1980" max="2020" formControlName="year" [(ngModel)]="car.year" id="year"
              class="form-control">
          </div>
        </div>


        <div class="col-md-2">
          <br>
          <label>No of Seats</label>
          <div class="form-group">
            <input type="number" placeholder="No of Seats" min="0" max="5" formControlName="seats" [(ngModel)]="car.seats" id="seats"
              class="form-control">
          </div>
        </div>


        <div class="col-md-2">
          <br>
          <label>Registration Number</label>
          <div class="form-group">
            <input type="string" placeholder="Registration Number" formControlName="vehicleNum" [(ngModel)]="car.vehicle_num" id="vehicleNum"
              class="form-control">
          </div>
        </div>

        <div class="col-md-2">
          <br>
          <div class="btn btn-group">
            <br>
            <button class="btn btn-primary" [disabled]="!carDetails.valid" type="submit">Save Car Details</button>
          </div>
        </div>
      </div>
      <br>


    </form>

    <div class="alert alert-warning" *ngIf="this.carDetails.get('model').hasError('pattern')
    && this.carDetails.get('model').touched">Enter Only Alphabets or Alphanumberic</div>
    <div class="alert alert-warning" *ngIf="this.carDetails.get('model').hasError('required')
    && this.carDetails.get('model').touched">Car Model required</div>
    <div class="alert alert-warning" *ngIf="this.carDetails.get('model').hasError('pattern')
    && this.carDetails.get('pattern').touched">should Be alphabetical or AlphaNumerical</div>
    <div class="alert alert-warning" *ngIf="this.carDetails.get('model').hasError('maxLength')
    && this.carDetails.get('maxLength').touched">Cannot be More than 10 Characters</div>
    <div class="alert alert-info" *ngIf="this.carDetails.get('model').touched && this.carDetails.get('model').invalid">
      Car model Should be aphanmubric characters and Max length of 7</div>
    <div class="alert alert-warning" *ngIf="this.carDetails.get('year').hasError('pattern')
    && this.carDetails.get('year').touched">Enter Valid Year between 1980-2000</div>
    <div class="alert alert-warning" *ngIf="this.carDetails.get('year').hasError('minMaxYear')
    && this.carDetails.get('year').touched">Choose a car Model between 1980-2020</div>

    <div class="alert alert-warning" *ngIf="this.carDetails.get('seats').hasError('required')
    && this.carDetails.get('seats').touched">Car Model Year required</div>
    <div class="alert alert-warning" *ngIf="this.carDetails.get('seats').hasError('minMax')
     && this.carDetails.get('seats').touched">Enter Seats between 1 and 6</div>
    <div class="alert alert-warning" *ngIf="this.carDetails.get('seats').hasError('required')
     && this.carDetails.get('seats').touched">Seats required</div>

    <div class="alert alert-warning" *ngIf="this.carDetails.get('vehicleNum').hasError('required')
     && this.carDetails.get('vehicleNum').touched">Vehicle Number Needed</div>
    <div class="alert alert-warning" *ngIf="this.carDetails.get('vehicleNum').hasError('maxLength')
     && this.carDetails.get('vehicleNum').touched">Cannot be More than 7 characters</div>
    <div class="alert alert-warning" *ngIf="this.carDetails.get('vehicleNum').hasError('pattern')
     && this.carDetails.get('vehicleNum').touched">Registration should have Alphabets or AplaNumberic characters</div>
    <div class="alert alert-info" *ngIf="this.carDetails.get('vehicleNum').touched && this.carDetails.get('vehicleNum').invalid">
      Registration number Should be aphanmubric characters and Max length of 7</div>

    <div class="alert alert-warning" *ngIf="this.carDetails.get('company').hasError('required')
     && this.carDetails.get('company').touched">Car company required</div>
    <div class="alert alert-warning" *ngIf="this.carDetails.get('company').hasError('pattern')
     && this.carDetails.get('company').touched">Car Company Must has a valid Alpabetic characters </div>
  </div>

  <br>
  <br>

  <div class="row">

    <div class="alert alert-danger" role="alert" *ngIf="status === 'failure'">
      {{successMsg}}
    </div>
    <div class="alert alert-success" role="alert" *ngIf="status === 'success'">
      {{successMsg}}
    </div>
  </div>
  <div class="alert alert-danger" *ngIf=" postRideStatus">
      Hey..! You got a ride scheduled within 2 hours Interval of selected date...Please check your Current Rides and Posted Rides.
  </div>

  <form [formGroup]="postRideForm" (ngSubmit)="createRide()">

    <div class="col-md-12">
      <br>

      <h2 style="color:blue;">Post a Ride and Share It</h2>
      <br>

      <div class="col-md-3">
        <label>Ride Stating Location</label>
        <div class="form-group">
          <label class="center-block">Origin:
            <select class="form-control" name="origin" [(ngModel)]="postride.origin" formControlName="origin">
              <option *ngFor="let destination of destinations" [value]="destination">{{destination}}</option>
            </select>
          </label>
        </div>
      </div>

      <div class="col-md-3">
        <label>Destination</label>
        <div class="form-group">
          <label class="center-block">To:
            <select class="form-control" name="destination" formControlName="destination" [(ngModel)]="postride.destination">
              <option *ngFor="let destination of destinations" [value]="destination">{{destination}}</option>
            </select>
          </label>
        </div>
      </div>

      <div class="col-md-3">
        <br>
        <label>No of Seats</label>
        <div class="form-group">
          <input type="number" placeholder="No of Seats" min="1" max="5" formControlName="seats" [(ngModel)]="postride.seats" id="seats"
            class="form-control">
        </div>

      </div>


      <div class="col-md-3">
        <br>
        <label>Choose start time</label>
        <div class="form-group">
          <input type="datetime-local" placeholder="Start Time" formControlName="date" [(ngModel)]="postride.ridedate" id="date" class="form-control">

        </div>
      </div>

      <br>

      <div class="row">

        <div class="col-md-12">
          <div class="col-md-6"></div>
          <div class="col-md-3">
            <label>Price/person</label>
            <div class="form-group">
              <input type="number" placeholder="Enter price/person" min="1" max="70" formControlName="price" [(ngModel)]="postride.price"
                id="price" class="form-control">
            </div>
          </div>

          <div class="col-md-3">
            <br>
            <div class="btn btn-group">
              <button class="btn btn-primary" [disabled]="!postRideForm.valid || validateRide() " type="submit">POST</button>
            </div>
          </div>




        </div>

      </div>
    </div>
    <div class="alert alert-danger" *ngIf="((this.postRideForm.get('destination').value === this.postRideForm.get('origin').value) &&
(this.postRideForm.get('destination').touched && this.postRideForm.get('origin').touched))">
      Choose a different Destination</div>
    <div class="alert alert-danger" *ngIf="this.postRideForm.get('price').hasError('minMaxPrice') && this.postRideForm.get('price').touched">Enter valid price between 1 and 70$</div>
    <div class="alert alert-danger" *ngIf="this.postRideForm.get('seats').hasError('minMax') && this.postRideForm.get('seats').touched">Enter Seats between 1 and 6</div>
    <!-- <div class="alert alert-danger" *ngIf="timeselected < timetoday" > Hey..! Cannot Travel back in time..!</div> -->
    <!-- <div class="alert alert-danger" *ngIf="this.postRideForm.get('date').hasError('validateRideDate') && this.postRideForm.get('date').touched">Enter valid date</div>
    <div class="alert alert-danger" *ngIf="this.postRideForm.get('date').touched && this.postRideForm.get('date').invalid">       
 Date should be Greater than today...!</div> -->
 <div class="alert alert-danger" *ngIf="this.postRideForm.get('date').hasError('validateYear') && this.postRideForm.get('date').touched">Hey Time travel is Not possible..! Enter a valid date</div>

  </form>



</div>